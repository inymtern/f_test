(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18ac5671"],{"01b7":function(e,t,n){"use strict";n.r(t);n("ac6a"),n("456d"),n("96cf");var s=n("3b8d"),a=n("c24f"),r=n("5f87"),o={name:"resetPhone",data:function(){return{errorMessage:{captcha:"",mobile:"",code:""},resetPhoneData:{newPhone:"",captcha:"",random:Object(r["b"])(),code:""},status:{smsDisabled:!1,smsText:"获取验证码",phoneDisabled:!1}}},methods:{changeRandom:function(){this.resetPhoneData.random=Object(r["b"])()},validateResetPhone:function(){this.clearErrorMessage(this.errorMessage);var e=/^1[345789][0-9]{9}$/,t=!0;return e.test(this.resetPhoneData.newPhone)?(this.errorMessage.mobile="",this.resetPhoneData.newPhone?(this.resetPhoneData.code||(t=!1,this.errorMessage.code="短信验证码不能为空"),t):(t=!1,this.errorMessage.mobile="手机号不能为空",t)):(t=!1,this.errorMessage.mobile="手机号码格式错误",t)},confirm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.validateResetPhone()){e.next=2;break}return e.abrupt("return");case 2:return t=this,t.status.registerDisabled=!0,n={phone:this.resetPhoneData.newPhone,verifycode:this.resetPhoneData.code},e.next=7,Object(a["h"])(n).then((function(e){s.$store.commit("SET_PHONE",s.resetPhoneData.newPhone),t.$router.push("/mlogin")})).catch((function(e){t.changeRandom(),t.status.registerDisabled=!1}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSmsCode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.validateSendSms()){e.next=2;break}return e.abrupt("return");case 2:return t=this,n={phone:this.resetPhoneData.newPhone},t.status.smsDisabled=!0,e.next=7,Object(a["i"])(n).then((function(e){t.smsTimeOut(60)})).catch((function(e){t.status.smsDisabled=!1,t.changeRandom()}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),smsTimeOut:function(e){var t=this;0===e?(this.status.smsDisabled=!1,this.status.smsText="重新获取"):(e--,this.status.smsText=e+"s",setTimeout((function(){t.smsTimeOut(e)}),1e3))},clearErrorMessage:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var s=n[t];e[s]=""}},validateSendSms:function(){this.clearErrorMessage(this.errorMessage);var e=!0,t=/^1[345789][0-9]{9}$/;return this.resetPhoneData.newPhone&&t.test(this.resetPhoneData.newPhone)?this.errorMessage.mobile="":(e=!1,this.errorMessage.mobile="手机号码格式错误"),e}},computed:{imageUrl:function(){return"http://106.54.26.92:1214/api/nzzndata/web/clientuser/verifycode?random="+this.resetPhoneData.random}}},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-cell-group",{staticStyle:{"margin-top":"60px"}},[n("van-field",{attrs:{placeholder:"请输入新的手机号","error-message":e.errorMessage.mobile,clearable:""},model:{value:e.resetPhoneData.newPhone,callback:function(t){e.$set(e.resetPhoneData,"newPhone",t)},expression:"resetPhoneData.newPhone"}}),e._v(" "),n("div",{staticStyle:{"padding-bottom":"30px"}}),e._v(" "),n("van-field",{staticClass:"send-info",attrs:{clearable:"",placeholder:"请输入手机验证码","error-message":e.errorMessage.code},model:{value:e.resetPhoneData.code,callback:function(t){e.$set(e.resetPhoneData,"code",t)},expression:"resetPhoneData.code"}},[n("van-button",{staticClass:"send-btn",attrs:{slot:"button",size:"small",color:"#C00000",disabled:e.status.smsDisabled},on:{click:function(t){return e.getSmsCode()}},slot:"button"},[e._v(e._s(e.status.smsText))])],1)],1),e._v(" "),n("van-button",{staticClass:"btn",staticStyle:{"margin-top":"64px",width:"90%","margin-left":"5%"},attrs:{type:"primary",size:"large",color:"#C00000",disabled:e.status.phoneDisabled},on:{click:e.confirm}},[e._v("确定")])],1)},c=[],h=n("2455");function u(e){n("d56b")}var l=!1,d=u,b="data-v-365a9fe7",m=null,f=Object(h["a"])(o,i,c,l,d,b,m);t["default"]=f.exports},9672:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"\n.send-btn[data-v-365a9fe7]{\n    background-color: transparent !important;\n    border: none;\n    color: #C00000 !important;\n    font-size: 15px;\n}\n.send-info[data-v-365a9fe7]::after{\n    position: absolute;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    content: ' ';\n    pointer-events: none;\n    right: 0;\n    bottom: 0;\n    left: 16px;\n    border-bottom: 1px solid #ebedf0;\n    -webkit-transform: scaleY(.5);\n    transform: scaleY(.5);\n}\n.btn[data-v-365a9fe7]{\n    height: 40px;\n    line-height: 38px;\n}\n",""])},d56b:function(e,t,n){var s=n("9672");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=n("499e").default;a("d96795b6",s,!0,{})}}]);